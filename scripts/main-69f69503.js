"use strict";$(".list-group-item").on("click",function(r){var a=$(this).closest(".list-group").children(".active");a.removeClass("active"),$(r.target).addClass("active")});var dashyAdmin=angular.module("dashyAdmin",["ui.bootstrap","ngRoute"]);dashyAdmin.config(["$routeProvider","$locationProvider",function(r){r.when("/",{templateUrl:"main.html",controller:"MainCtrl",controllerAs:"main"}).when("/dashboards/:dashboardId",{templateUrl:"dashboard.html",controller:"DashboardCtrl",controllerAs:"dashboard"}).otherwise({redirectTo:"/"})}]),dashyAdmin.factory("api",["$http",function(r){return{getServerStatus:function(){return r.get("http://api.dashy.io/status")},getUserDashboards:function(a){var o=a;return o="cc1f2ba3-1a19-44f2-ae78-dc9784a2a60f",r.get("http://api.dashy.io/users/"+o)},getDashboard:function(a){return r.get("http://api.dashy.io/dashboards/"+a)},setDashboard:function(a){return r({method:"PUT",headers:{"Content-Type":"application/json","Access-Control-Allow-Methods":"GET, POST, PUT, OPTIONS"},data:{id:a.id,interval:a.interval,name:a.name,urls:a.urls},url:"http://api.dashy.io/dashboards/"+a.id})}}}]),dashyAdmin.controller("ServerStatusCtrl",["$scope","api",function(r,a){var o=a.getServerStatus();o.success(function(a,o){r.serverStatus=o}).error(function(){r.serverStatus=0})}]),dashyAdmin.controller("MainCtrl",["$scope","api",function(r,a){var o=a.getUserDashboards();o.success(function(o){o.dashboards.forEach(function(o){a.getDashboard(o).success(function(a){r.dashboards=[],r.dashboards.push(a)})})}).error(function(){r.dashboards=[],r.dashboardsError="Couldn't load your dashboards"})}]),dashyAdmin.controller("DashboardCtrl",["$scope","api","$routeParams",function(r,a,o){a.getDashboard(o.dashboardId).success(function(a){r.dashboard=a}),r.addUrl=function(){r.dashboard.urls.push("")},r.removeUrl=function(a){r.dashboard.urls.splice(a,1)},r.saveDashboard=function(r){console.log(r),a.setDashboard(r).success(function(r,a){console.log(a)}).error(function(){console.log("error updating")})}}]);