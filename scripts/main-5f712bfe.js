"use strict";!function(){$(".list-group-item").on("click",function(r){var o=$(this).closest(".list-group").children(".active");o.removeClass("active"),$(r.target).addClass("active")});var r=angular.module("dashyAdmin",["ui.bootstrap","ngRoute"]);r.config(["$routeProvider","$locationProvider",function(r){r.when("/",{templateUrl:"main.html",controller:"MainCtrl",controllerAs:"main"}).when("/dashboards/:dashboardId",{templateUrl:"dashboard.html",controller:"DashboardCtrl",controllerAs:"dashboard"}).otherwise({redirectTo:"/"})}]),r.factory("api",["$http",function(r){return{getServerStatus:function(){return r.get("http://api.dashy.io/status")},getUserDashboards:function(o){var a=o;return a="cc1f2ba3-1a19-44f2-ae78-dc9784a2a60f",r.get("http://api.dashy.io/users/"+a)},getDashboard:function(o){return r.get("http://api.dashy.io/dashboards/"+o)},setDashboard:function(o){return r({method:"PUT",headers:{"Content-Type":"application/json","Access-Control-Allow-Methods":"GET, POST, PUT, OPTIONS"},data:{id:o.id,interval:o.interval,name:o.name,urls:o.urls},url:"http://api.dashy.io/dashboards/"+o.id})}}}]),r.controller("ServerStatusCtrl",["$scope","api",function(r,o){var a=o.getServerStatus();a.success(function(o,a){r.serverStatus=200===a?!0:!1}).error(function(){r.serverStatus=!1,r.serverError=404})}]),r.controller("MainCtrl",["$scope","api",function(r,o){var a=o.getUserDashboards();a.success(function(a){a.dashboards.forEach(function(a){o.getDashboard(a).success(function(o){r.dashboards=[],r.dashboards.push(o)})})}).error(function(){r.dashboards=[],r.dashboardsError="Couldn't load your dashboards"})}]),r.controller("DashboardCtrl",["$scope","api","$routeParams",function(r,o,a){o.getDashboard(a.dashboardId).success(function(o){r.dashboard=o}),r.addUrl=function(){r.dashboard.urls.push("")},r.removeUrl=function(o){r.dashboard.urls.splice(o,1)},r.saveDashboard=function(r){console.log(r),o.setDashboard(r).success(function(r,o){console.log(o)}).error(function(r,o){console.log("error updating:"+o)})}}])}();